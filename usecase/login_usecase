package usecase

import (
	"errors"
	"ticket.narindo.com/repository"
)

type loginUsecase struct {
	repo repository.UserRepository
}

type LoginUsecase interface {
	SetEmail(email string) error
}

func (l *loginUsecase) SetEmail(email string) error {
	users, err := l.repo.FindAllWithPreload(map[string]interface{}{}, "Pic", "UserRole")
	if err != nil {
		return err
	}
	// var loginAs model.User
	for _, v := range users {
		if v.Email == email {
			// loginAs = v
			break
		}
		return errors.New("email not found")
	}
	return nil
}
func InitLoginUsecase(u repository.UserRepository) LoginUsecase {
	loginUsec := new(loginUsecase)
	loginUsec.repo = u
	return loginUsec
}
